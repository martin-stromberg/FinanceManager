@using FinanceManager.Shared.Dtos.Statements
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<Components.Shared.StatementDraftValidationPanel> Localizer

@if (Result == null)
{
    <div>@Localizer["NoValidation"]</div>
}
else
{
    <div style="max-height:60vh;overflow:auto;min-width:40rem;">
        <div style="margin-bottom:.5rem;font-weight:600;">@Localizer["Validation_Header"]</div>
        <div style="margin-bottom:.5rem;">@Localizer["Validation_Summary", Result.IsValid ? Localizer["Validation_Valid"] : Localizer["Validation_Invalid"]]</div>
        <table class="fm-table wide">
            <thead>
                <tr>
                    <th>@Localizer["Th_Severity"]</th>
                    <th>@Localizer["Th_Message"]</th>
                    <th>@Localizer["Th_Entry"]</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var m in Result.Messages)
                {
                    <tr>
                        <td>@m.Severity</td>
                        <td>@m.Message</td>
                        <td>@(m.EntryId?.ToString() ?? "-")</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}

@code {
    [Parameter] public DraftValidationResultDto? Result { get; set; }
}
